<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Location Info</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1 class="mb-4">Location Information</h1>

    <!-- Форма для ввода запроса -->
    <form th:action="@{/api/location/info}" method="get" class="mb-4">
        <div class="input-group">
            <input type="text" name="query" class="form-control" placeholder="Enter location name" required>
            <button type="submit" class="btn btn-primary">Search</button>
        </div>
    </form>

    <!-- Результаты поиска -->
    <div th:if="${locationInfo}">
        <!-- Информация о локации -->
        <h2>Location</h2>
        <ul>
            <li><strong>Name:</strong> <span th:text="${locationInfo.location.name}"></span></li>
            <li><strong>Country:</strong> <span th:text="${locationInfo.location.country}"></span></li>
            <li><strong>City:</strong> <span th:text="${locationInfo.location.city}"></span></li>
            <li><strong>Coordinates:</strong>
                <span th:text="${locationInfo.location.point.lat}"></span>,
                <span th:text="${locationInfo.location.point.lng}"></span>
            </li>
        </ul>

        <!-- Погода -->
        <h2>Weather</h2>
        <ul>
            <li><strong>Temperature:</strong> <span th:text="${locationInfo.weather.temperature}"></span> K</li>
            <li><strong>Description:</strong> <span th:text="${locationInfo.weather.description}"></span></li>
        </ul>

        <!-- Список интересных мест -->
        <h2>Interesting Places</h2>
        <div th:if="${locationInfo.places}" th:each="placeDetails : ${locationInfo.places}">
            <div class="card mb-3">
                <div class="card-header">
                    <span th:text="${placeDetails.place.properties.name}"></span>
                </div>
                <div class="card-body">
                    <p><strong>Types:</strong> <span th:text="${placeDetails.place.properties.kinds}"></span></p>
                    <div th:if="${placeDetails.details}">
                        <h5>Description</h5>
                        <p th:text="${placeDetails.details.wikipedia_extracts.text}"></p>
                        <ul>
                            <li><strong>City:</strong> <span th:text="${placeDetails.details.address.city}"></span></li>
                            <li><strong>Country:</strong> <span th:text="${placeDetails.details.address.country}"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Обработка ошибки -->
    <div th:if="${error}" class="alert alert-danger">
        <p th:text="${error}"></p>
    </div>
</div>
</body>
</html>
